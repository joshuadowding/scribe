<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">

    <link type="text/css" rel="stylesheet" href="../../css/index.css">
    <link type="text/css" rel="stylesheet" href="../../lib/fonts/inter/inter.css">
  </head>
  <body>
    <div class="create-wrapper">
      <form class="input-form">
        <div class="input-col">
          <div class="input-row">
            <label for="input-name">Name:</label>
            <input class="text" type="text" id="input-name" required />
          </div>
        </div>
        <div class="control-row">
          <input class="button" type="button" id="cancel" value="Cancel" />
          <input class="button tint" type="submit" value="Create" />
        </div>
      </form>
    </div>

    <!-- Fix: https://github.com/electron/electron/issues/345 -->
    <script type="text/javascript" src="../../lib/jquery-3.5.1.min.js" onload="window.$ = window.jQuery = module.exports;"></script>

    <script type="text/javascript">
      const ipc = require('electron').ipcRenderer;
      const theme = require('../../js/main/helpers/theme');

      ipc.on('choose-theme', (event, message) => {
        theme.chooseTheme(message);
      });

      ipc.on('create-failure', (event, message) => {
        // TODO: Handle invalid input.
      });

      $(document).ready(function() {
        $('.input-form').submit(function(event) {
          event.preventDefault();
          let input = $('#input-name').val().toString().trim();
          ipc.send('form-create', input);
        });

        $('#cancel').click(function() {
          ipc.send('form-cancel'); // Destroy the window on cancel.
        });
      });
    </script>
  </body>
</html>
